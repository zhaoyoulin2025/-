<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.MessageMapper">
    <resultMap type="Message" id="MiniProgramMessageResult">
        <result property="id"    column="id"    />
        <result property="messageType"    column="message_type"    />
        <result property="receiverId"    column="receiver_id"    />
        <result property="title"    column="title"    />
        <result property="content"    column="content"    />
        <result property="status"    column="status"    />
        <result property="sendTime"    column="send_time"    />
        <result property="readTime"    column="read_time"    />
        <result property="extraParams"    column="extra_params"    />
    </resultMap>


    <insert id="insert" parameterType="com.ruoyi.system.domain.Message" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO mini_program_message
        (message_type, receiver_id, title, content, status, send_time, extra_params)
        VALUES
        (#{messageType}, #{receiverId}, #{title}, #{content}, #{status}, #{sendTime}, #{extraParams})
    </insert>

    <select id="selectByReceiverAndStatus" resultMap="MiniProgramMessageResult" parameterType="Message">
        SELECT * FROM mini_program_message
        WHERE receiver_id = #{receiverId}
          AND status = #{status}
    </select>


    <update id="markAsRead" >
        update mini_program_message
           set status = 0
        where id = #{id}
    </update>



</mapper>
