{"version":3,"sources":["uni-app:///main.js","webpack:///D:/上海永熵/franchise-managementaiJMGL-project/wx_client/customer/follow.vue?0060","webpack:///D:/上海永熵/franchise-managementaiJMGL-project/wx_client/customer/follow.vue?21fd","webpack:///D:/上海永熵/franchise-managementaiJMGL-project/wx_client/customer/follow.vue?c62a","webpack:///D:/上海永熵/franchise-managementaiJMGL-project/wx_client/customer/follow.vue?90d5","uni-app:///customer/follow.vue","webpack:///D:/上海永熵/franchise-managementaiJMGL-project/wx_client/customer/follow.vue?e7cb","webpack:///D:/上海永熵/franchise-managementaiJMGL-project/wx_client/customer/follow.vue?28a9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","customerId","showDialog","newRecord","content","followRecords","onLoad","methods","fetchFollowRecords","uni","title","mask","util","clientId","then","that","icon","catch","showAddDialog","cancelAdd","saveRecord","userId","followUpDescription","delta","formatDate"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;;;AAGlE;AACmM;AACnM,gBAAgB,6MAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAmwB,CAAgB,gxBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC+CvxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AADA;AAAA,eAIA;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;QACAC;MACA;;MACAC;IACA;EACA;EACAC;IACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACAC;QAAAC;QAAAC;MAAA;MACAC;QAAAC;MAAA,2CACAC;QACAL;QACA;UACAM;QACA;UACAN;YACAC;YACAM;UACA;QACA;MACA,GACAC;QACAR;QACAA;UACAC;UACAM;QACA;MAEA;IACA;IAEA;IACAE;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;QACAX;UACAC;UACAM;QACA;QACA;MACA;;MAEA;MACA;QACAK;QACAR;QACAS;MACA;MACAb;QAAAC;QAAAC;MAAA;MACAC,6FACAE;QACAL;QACA,uBAEA;UACAA;YACAC;YACAM;UACA;QACA;MACA,GACAC;QACAR;QACAA;UACAC;UACAM;QACA;MAEA;MACA;MACAP;QACAc;MACA;;MAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MAEA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjLA;AAAA;AAAA;AAAA;AAAslC,CAAgB,qkCAAG,EAAC,C;;;;;;;;;;;ACA1mC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"customer/follow.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './customer/follow.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./follow.vue?vue&type=template&id=32f39ce4&\"\nvar renderjs\nimport script from \"./follow.vue?vue&type=script&lang=js&\"\nexport * from \"./follow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./follow.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"customer/follow.vue\"\nexport default component.exports","export * from \"-!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./follow.vue?vue&type=template&id=32f39ce4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.followRecords.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./follow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./follow.vue?vue&type=script&lang=js&\"","<template>\r\n    <view class=\"follow-container\">\r\n        <!-- 顶部标题和添加按钮 -->\r\n        <view class=\"header\">\r\n            <text class=\"title\">跟进记录</text>\r\n            <button class=\"add-btn\" @click=\"showAddDialog\">添加记录</button>\r\n        </view>\r\n\r\n        <!-- 记录列表 -->\r\n        <view class=\"record-list\">\r\n            <view v-if=\"followRecords.length === 0\" class=\"empty-tip\">\r\n                <text>暂无跟进记录</text>\r\n            </view>\r\n\r\n            <view v-else>\r\n                <view v-for=\"(record, index) in followRecords\" :key=\"index\" class=\"record-item\">\r\n                    <view class=\"record-header\">\r\n                        <text class=\"record-name\">{{ record.nickName }}</text>\r\n                        <text class=\"record-time\">{{ record.followUpTime }}</text>\r\n                    </view>\r\n                    <view class=\"record-content\">\r\n                        <text>{{ record.followUpDescription }}</text>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n        </view>\r\n\r\n        <!-- 添加记录弹窗 -->\r\n        <view class=\"dialog-mask\" v-if=\"showDialog\" @click=\"cancelAdd\"></view>\r\n        <view class=\"dialog\" v-if=\"showDialog\">\r\n            <view class=\"dialog-header\">\r\n                <text class=\"dialog-title\">添加跟进记录</text>\r\n            </view>\r\n            <view class=\"dialog-body\">\r\n                <textarea class=\"dialog-textarea\" v-model=\"newRecord.content\" placeholder=\"请输入跟进内容...\" :maxlength=\"-1\"\r\n                    :auto-height=\"false\" :show-confirm-bar=\"false\" :cursor-spacing=\"100\" :rows=\"5\"></textarea>\r\n            </view>\r\n            <view class=\"dialog-footer\">\r\n                <button class=\"btn-cancel\" @click=\"cancelAdd\">取消</button>\r\n                <button class=\"btn-save\" @click=\"saveRecord\">保存</button>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\nconst util = require(\"@/utils/util.js\")\r\nimport {\r\n    getUserInfo,\r\n} from '@/utils/auth';\r\nexport default {\r\n    data() {\r\n        return {\r\n            customerId: '', // 客户ID\r\n            showDialog: false, // 是否显示添加记录弹窗\r\n            newRecord: {\r\n                content: '' // 新记录内容\r\n            },\r\n            followRecords: [] // 跟进记录列表\r\n        }\r\n    },\r\n    onLoad(options) {\r\n        if (options.id) {\r\n            this.customerId = options.id;\r\n            this.fetchFollowRecords();\r\n        }\r\n    },\r\n    methods: {\r\n        // 获取跟进记录列表\r\n        fetchFollowRecords() {\r\n            // 这里是模拟数据，实际开发时替换为接口调用\r\n            let that = this;\r\n            uni.showLoading({ title: '加载中', mask: true });\r\n            util.request('wx/api/wxCustomerFollowList', { clientId: this.customerId }, 'GET', 'application/json', false, true)\r\n                .then(res => {\r\n                    uni.hideLoading()\r\n                    if (res.code === 200) {\r\n                        that.followRecords = res.data;\r\n                    } else {\r\n                        uni.showToast({\r\n                            title: res.msg,\r\n                            icon: 'none'\r\n                        })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    uni.hideLoading()\r\n                    uni.showToast({\r\n                        title: '网络异常，请稍后再试',\r\n                        icon: 'none'\r\n                    })\r\n\r\n                })\r\n        },\r\n\r\n        // 显示添加记录弹窗\r\n        showAddDialog() {\r\n            this.showDialog = true;\r\n            this.newRecord.content = '';\r\n        },\r\n\r\n        // 取消添加\r\n        cancelAdd() {\r\n            this.showDialog = false;\r\n        },\r\n\r\n        // 保存记录\r\n        saveRecord() {\r\n            if (!this.newRecord.content.trim()) {\r\n                uni.showToast({\r\n                    title: '请输入跟进内容',\r\n                    icon: 'none'\r\n                });\r\n                return;\r\n            }\r\n\r\n            // 构建新记录对象\r\n            const record = {\r\n                userId: getUserInfo().userId,\r\n                clientId: this.customerId,\r\n                followUpDescription: this.newRecord.content\r\n            };\r\n            uni.showLoading({ title: '提交中', mask: true });\r\n            util.request('wx/api/insertCustomerFollow', record, 'POST', 'application/json', false, true)\r\n                .then(res => {\r\n                    uni.hideLoading()\r\n                    if (res.code === 200) {\r\n                        \r\n                    } else {\r\n                        uni.showToast({\r\n                            title: res.msg,\r\n                            icon: 'none'\r\n                        })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    uni.hideLoading()\r\n                    uni.showToast({\r\n                        title: '网络异常，请稍后再试',\r\n                        icon: 'none'\r\n                    })\r\n\r\n                })\r\n            this.showDialog = false;\r\n            uni.navigateBack({\r\n                delta: 1\r\n            });\r\n            \r\n\r\n            // 实际API调用示例\r\n            // uni.request({\r\n            //   url: 'your-api-url/follow/add',\r\n            //   data: {\r\n            //     customerId: this.customerId,\r\n            //     content: this.newRecord.content\r\n            //   },\r\n            //   method: 'POST',\r\n            //   success: (res) => {\r\n            //     if (res.data.code === 200) {\r\n            //       this.fetchFollowRecords(); // 重新获取列表\r\n            //       this.showDialog = false;\r\n            //     }\r\n            //   }\r\n            // });\r\n        },\r\n\r\n        // 格式化日期\r\n        formatDate(date) {\r\n            const year = date.getFullYear();\r\n            const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n            const day = date.getDate().toString().padStart(2, '0');\r\n            const hours = date.getHours().toString().padStart(2, '0');\r\n            const minutes = date.getMinutes().toString().padStart(2, '0');\r\n\r\n            return `${year}-${month}-${day} ${hours}:${minutes}`;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.follow-container {\r\n    padding: 20rpx;\r\n    background-color: #f5f5f5;\r\n    min-height: 100vh;\r\n}\r\n\r\n/* 顶部标题和按钮 */\r\n.header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 20rpx 30rpx;\r\n    /* 增加左右内边距 */\r\n    margin-bottom: 20rpx;\r\n}\r\n\r\n.title {\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n    color: #333;\r\n    margin-left: 20rpx;\r\n    /* 标题右移 */\r\n}\r\n\r\n.add-btn {\r\n    background: linear-gradient(135deg, #1890ff, #0050b3);\r\n    color: #fff;\r\n    font-size: 28rpx;\r\n    padding: 10rpx 30rpx;\r\n    border-radius: 30rpx;\r\n    box-shadow: 0 4rpx 12rpx rgba(24, 144, 255, 0.3);\r\n    margin-right: 10rpx;\r\n    /* 按钮右移 */\r\n}\r\n\r\n/* 记录列表 */\r\n.record-list {\r\n    margin-top: 20rpx;\r\n}\r\n\r\n.record-item {\r\n    background-color: #fff;\r\n    border-radius: 16rpx;\r\n    padding: 20rpx 30rpx;\r\n    margin-bottom: 20rpx;\r\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.record-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: 16rpx;\r\n    border-bottom: 1rpx solid #f0f0f0;\r\n    padding-bottom: 16rpx;\r\n}\r\n\r\n.record-name {\r\n    font-size: 30rpx;\r\n    font-weight: bold;\r\n    color: #333;\r\n}\r\n\r\n.record-time {\r\n    font-size: 26rpx;\r\n    color: #999;\r\n}\r\n\r\n.record-content {\r\n    font-size: 28rpx;\r\n    color: #666;\r\n    line-height: 1.5;\r\n    word-wrap: break-word;\r\n    white-space: pre-wrap;\r\n    word-break: break-all;\r\n}\r\n\r\n/* 弹窗样式 */\r\n.dialog-mask {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    z-index: 999;\r\n}\r\n\r\n.dialog {\r\n    position: fixed;\r\n    left: 50%;\r\n    top: 30%;\r\n    transform: translate(-50%, -50%);\r\n    width: 80%;\r\n    background-color: #fff;\r\n    border-radius: 16rpx;\r\n    overflow: hidden;\r\n    z-index: 1000;\r\n    box-shadow: 0 4rpx 24rpx rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.dialog-header {\r\n    padding: 30rpx;\r\n    text-align: center;\r\n    border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.dialog-title {\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    color: #333;\r\n}\r\n\r\n.dialog-body {\r\n    padding: 30rpx;\r\n}\r\n\r\n.dialog-textarea {\r\n    width: 100%;\r\n    height: 240rpx;\r\n    border: 1rpx solid #e8e8e8;\r\n    border-radius: 8rpx;\r\n    padding: 20rpx;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    background-color: #f9f9f9;\r\n}\r\n\r\n.dialog-footer {\r\n    display: flex;\r\n    border-top: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.dialog-footer button {\r\n    flex: 1;\r\n    height: 90rpx;\r\n    line-height: 90rpx;\r\n    text-align: center;\r\n    font-size: 30rpx;\r\n    border-radius: 0;\r\n    margin: 0;\r\n}\r\n\r\n.btn-cancel {\r\n    background-color: #f5f5f5;\r\n    color: #666;\r\n}\r\n\r\n.btn-save {\r\n    background: linear-gradient(135deg, #1890ff, #0050b3);\r\n    color: #fff;\r\n}\r\n\r\n/* 无数据提示 */\r\n.empty-tip {\r\n    text-align: center;\r\n    padding: 100rpx 0;\r\n    color: #999;\r\n    font-size: 28rpx;\r\n}\r\n</style>","import mod from \"-!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./follow.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./follow.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1761229024483\n      var cssReload = require(\"D:/tools/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}