<view class="follow-container"><view class="header"><text class="title">签约记录</text><button data-event-opts="{{[['tap',[['showAddDialog',['$event']]]]]}}" class="add-btn" bindtap="__e">添加签约</button></view><view class="record-list"><block wx:if="{{$root.g0===0}}"><view class="empty-tip"><text>暂无签约记录</text></view></block><block wx:else><view><block wx:for="{{followRecords}}" wx:for-item="record" wx:for-index="index" wx:key="index"><view class="record-item"><view class="record-header"><text class="record-name">{{record.shopName}}</text></view><view class="record-detail"><text class="detail-item">{{"签约客户："+record.clientName}}</text></view><view class="record-detail"><text class="detail-item">{{"签约时间："+record.saleTime}}</text></view></view></block></view></block></view><block wx:if="{{showDialog}}"><view data-event-opts="{{[['tap',[['cancelAdd',['$event']]]]]}}" class="dialog-mask" bindtap="__e"></view></block><block wx:if="{{showDialog}}"><view class="dialog"><view class="dialog-header"><text class="dialog-title">添加签约记录</text></view><view class="dialog-body"><picker mode="selector" range="{{clientList}}" range-key="name" data-event-opts="{{[['change',[['onClientChange',['$event']]]]]}}" bindchange="__e"><view class="picker">{{''+(clientList[clientIndex]?clientList[clientIndex].name:'请选择客户')+''}}</view></picker><picker mode="selector" range="{{shopList}}" range-key="name" data-event-opts="{{[['change',[['onShopChange',['$event']]]]]}}" bindchange="__e"><view class="picker">{{''+(shopList[shopIndex]?shopList[shopIndex].name:'请选择商铺')+''}}</view></picker><input class="dialog-input" type="number" placeholder="请输入金额(元/月)" data-event-opts="{{[['input',[['__set_model',['$0','money','$event',[]],['newRecord']]]]]}}" value="{{newRecord.money}}" bindinput="__e"/><input class="dialog-input" type="number" placeholder="请输入年数" data-event-opts="{{[['input',[['__set_model',['$0','year','$event',[]],['newRecord']]]]]}}" value="{{newRecord.year}}" bindinput="__e"/></view><view class="dialog-footer"><button data-event-opts="{{[['tap',[['cancelAdd',['$event']]]]]}}" class="btn-cancel" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['saveRecord',['$event']]]]]}}" class="btn-save" bindtap="__e">保存</button></view></view></block></view>