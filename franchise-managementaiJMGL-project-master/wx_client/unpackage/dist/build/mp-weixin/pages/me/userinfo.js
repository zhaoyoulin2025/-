(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/userinfo"],{"0eb6":function(e,n,t){},"466e":function(e,n,t){"use strict";t.r(n);var a=t("9611"),o=t.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(i);n["default"]=o.a},"79b0":function(e,n,t){"use strict";(function(e,n){var a=t("4ea4");t("3cdf");a(t("66fd"));var o=a(t("c722"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"7df9":function(e,n,t){"use strict";var a=t("0eb6"),o=t.n(a);o.a},"94d4":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},o=[]},9611:function(e,n,t){"use strict";(function(e,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("0e51"),i=t("1b89"),s={data:function(){return{userInfo:{},avatarUrl:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0",nickName:"",phone:"",userId:""}},created:function(){this.userInfo=(0,o.getUserInfo)(),this.userId=this.userInfo.userId,this.nickName="暂无昵称"==this.userInfo.nickName?"":this.userInfo.nickName,this.avatarUrl=this.userInfo.avatar,this.phone=this.userInfo.phonenumber,console.log("userInfo",this.userInfo)},mounted:function(){},methods:{clickBack:function(){e.navigateBack()},getNickname:function(e){this.nickName=e.detail.value},checkNickName:function(){if(!this.nickName)return e.showToast({title:"请输入昵称",icon:"none"}),!1;var n=this.nickName.trim();return 0==n.length?(e.showToast({title:"请输入正确的昵称",icon:"none"}),!1):(this.nickName=n,!0)},onChooseAvatar:function(n){var t=this,o=n.detail.avatarUrl,s="data:image/jpeg;base64,"+a.getFileSystemManager().readFileSync(o,"base64"),r={base64Str:s};i.request("common/uploadBase64Img",r,"POST").then((function(n){200===n.code?(t.avatarUrl=n.url,console.log("this.avatarUrl",t.avatarUrl)):e.showToast({icon:"none",title:"获取失败，请稍后试试！",duration:2e3})}))},onGetPhoneNumber:function(n){console.log(n);var t=this;if("getPhoneNumber:fail user deny"==n.detail.errMsg);else{var a={code:n.detail.code};console.log(a),i.request("wxGetPhone",a,"POST").then((function(n){200===n.code?(e.hideLoading(),setTimeout((function(){e.hideLoading()}),2e3),console.log(n),t.phone=n.data):e.showToast({icon:"none",title:"获取失败，请稍后试试！",duration:2e3})}))}},submit:function(){if(console.log("submit提交",this.nickName,this.avatarUrl),this.avatarUrl){if(this.checkNickName())if(this.phone){var n={nickName:this.nickName,avatar:this.avatarUrl,userId:this.userId,phonenumber:this.phone};console.log("form====",n),e.showLoading({title:"加载中",mask:!0}),i.request("wxUpdateUserInfo",n,"POST").then((function(n){if(e.hideLoading(),200===n.code){var t=n.user;(0,o.setUserInfo)(t);var a=getCurrentPages();console.log("pages====",a);var i=a[a.length-2];i&&"pages/me/me"==i.route?e.navigateBack({delta:2}):0==t.customerType?e.reLaunch({url:"/pages/question/index"}):1==t.customerType||2==t.customerType?e.reLaunch({url:"/pages/prebook/index"}):3==t.customerType&&e.reLaunch({url:"/pages/index/index"})}else e.showToast({icon:"none",title:n.msg,duration:2e3})}))}else e.showToast({title:"请绑定手机",icon:"none"})}else e.showToast({title:"请上传头像",icon:"none"})}}};n.default=s}).call(this,t("543d")["default"],t("bc2e")["default"])},c722:function(e,n,t){"use strict";t.r(n);var a=t("94d4"),o=t("466e");for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);t("7df9");var s=t("f0c5"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=r.exports}},[["79b0","common/runtime","common/vendor"]]]);