(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["customer/follow"],{"280f":function(t,o,n){"use strict";n.d(o,"b",(function(){return e})),n.d(o,"c",(function(){return i})),n.d(o,"a",(function(){}));var e=function(){var t=this.$createElement,o=(this._self._c,this.followRecords.length);this.$mp.data=Object.assign({},{$root:{g0:o}})},i=[]},"7efe":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=n("0e51"),i=n("1b89"),c={data:function(){return{customerId:"",showDialog:!1,newRecord:{content:""},followRecords:[]}},onLoad:function(t){t.id&&(this.customerId=t.id,this.fetchFollowRecords())},methods:{fetchFollowRecords:function(){var o=this;t.showLoading({title:"加载中",mask:!0}),i.request("wx/api/wxCustomerFollowList",{clientId:this.customerId},"GET","application/json",!1,!0).then((function(n){t.hideLoading(),200===n.code?o.followRecords=n.data:t.showToast({title:n.msg,icon:"none"})})).catch((function(o){t.hideLoading(),t.showToast({title:"网络异常，请稍后再试",icon:"none"})}))},showAddDialog:function(){this.showDialog=!0,this.newRecord.content=""},cancelAdd:function(){this.showDialog=!1},saveRecord:function(){if(this.newRecord.content.trim()){var o={userId:(0,e.getUserInfo)().userId,clientId:this.customerId,followUpDescription:this.newRecord.content};t.showLoading({title:"提交中",mask:!0}),i.request("wx/api/insertCustomerFollow",o,"POST","application/json",!1,!0).then((function(o){t.hideLoading(),200===o.code||t.showToast({title:o.msg,icon:"none"})})).catch((function(o){t.hideLoading(),t.showToast({title:"网络异常，请稍后再试",icon:"none"})})),this.showDialog=!1,t.navigateBack({delta:1})}else t.showToast({title:"请输入跟进内容",icon:"none"})},formatDate:function(t){var o=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),e=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0");return"".concat(o,"-").concat(n,"-").concat(e," ").concat(i,":").concat(c)}}};o.default=c}).call(this,n("543d")["default"])},b0ce:function(t,o,n){"use strict";(function(t,o){var e=n("4ea4");n("3cdf");e(n("66fd"));var i=e(n("d1c6"));t.__webpack_require_UNI_MP_PLUGIN__=n,o(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},c0e0:function(t,o,n){"use strict";n.r(o);var e=n("7efe"),i=n.n(e);for(var c in e)["default"].indexOf(c)<0&&function(t){n.d(o,t,(function(){return e[t]}))}(c);o["default"]=i.a},d09a:function(t,o,n){"use strict";var e=n("da17"),i=n.n(e);i.a},d1c6:function(t,o,n){"use strict";n.r(o);var e=n("280f"),i=n("c0e0");for(var c in i)["default"].indexOf(c)<0&&function(t){n.d(o,t,(function(){return i[t]}))}(c);n("d09a");var a=n("f0c5"),s=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);o["default"]=s.exports},da17:function(t,o,n){}},[["b0ce","common/runtime","common/vendor"]]]);