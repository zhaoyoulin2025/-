(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["clock/index"],{"31c7":function(t,n,e){"use strict";(function(t,n){var o=e("4ea4");e("3cdf");o(e("66fd"));var i=o(e("88cd"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(i.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},"7b9f":function(t,n,e){"use strict";var o=e("f190"),i=e.n(o);i.a},"88cd":function(t,n,e){"use strict";e.r(n);var o=e("8a53"),i=e("f24c");for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(a);e("7b9f");var c=e("f0c5"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=r.exports},"8a53":function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},i=[]},cc78:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("0e51"),i=e("1b89"),a={data:function(){return{userInfo:{avatar:"",name:""},currentTime:"",location:"",timer:null,latitude:0,longitude:0}},onLoad:function(){var t=this;this.getUserInfo(),this.getLocation(),this.updateTime(),this.timer=setInterval((function(){t.updateTime()}),1e3)},onUnload:function(){this.timer&&clearInterval(this.timer)},methods:{getUserInfo:function(){var t=(0,o.getUserInfo)();t&&(this.userInfo.name=t.name||t.nickName||"未知用户",this.userInfo.avatar=t.avatar||t.avatarUrl)},updateTime:function(){var t=new Date,n=t.getHours().toString().padStart(2,"0"),e=t.getMinutes().toString().padStart(2,"0"),o=t.getSeconds().toString().padStart(2,"0");this.currentTime="".concat(n,":").concat(e,":").concat(o)},getLocation:function(){var n=this;t.getLocation({type:"gcj02",geocode:!0,success:function(t){console.log("获取位置成功",t),n.latitude=t.latitude,n.longitude=t.longitude,n.getLocationName(t.latitude,t.longitude)},fail:function(e){console.error("获取位置失败",e),n.location="无法获取位置信息",t.showModal({title:"提示",content:"需要获取您的位置信息，请开启位置权限",confirmText:"去设置",success:function(n){n.confirm&&t.openSetting()}})}})},getLocationName:function(n,e){var o=this;i.request("wx/api/getLocation",{latitude:n,longitude:e},"GET").then((function(n){t.hideLoading(),console.log(n),200===n.code?o.location=n.data:t.showToast({title:"无法获取位置信息，请稍后再试",icon:"none"})}))},clockIn:function(){if(this.location&&"正在获取位置..."!==this.location&&"未知位置"!==this.location){t.showLoading({title:"打卡中..."});var n=new Date,e=n.getFullYear(),o=(n.getMonth()+1).toString().padStart(2,"0"),a=n.getDate().toString().padStart(2,"0"),c="".concat(e,"-").concat(o,"-").concat(a),r={dateStr:c+" "+this.currentTime,location:this.location};i.request("wx/api/insertUserClock",r,"POST").then((function(n){t.hideLoading(),200===n.code?t.showToast({title:"打卡成功",icon:"success"}):t.showToast({title:n.msg||"打卡失败",icon:"none"})})).catch((function(n){t.hideLoading(),console.error("打卡失败",n),t.showToast({title:"打卡失败，请稍后再试",icon:"none"})}))}else t.showToast({title:"无法获取位置信息，请稍后再试",icon:"none"})},goToAttendance:function(){t.navigateTo({url:"/clock/record"})}}};n.default=a}).call(this,e("543d")["default"])},f190:function(t,n,e){},f24c:function(t,n,e){"use strict";e.r(n);var o=e("cc78"),i=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=i.a}},[["31c7","common/runtime","common/vendor"]]]);